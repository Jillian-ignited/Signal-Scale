<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Signal & Scale — Competitive Intelligence</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="./styles.css" rel="stylesheet" />
  <!-- Chart.js for visuals -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <aside class="sidebar">
    <div class="logo">Signal<span>&</span>Scale</div>
    <nav>
      <button class="nav active" data-target="#dashboard">Dashboard</button>
      <button class="nav" data-target="#insights">Insights</button>
      <button class="nav" data-target="#report">Report</button>
    </nav>
    <div class="foot">
      <span id="pill" class="pill">checking…</span>
    </div>
  </aside>

  <main class="main">
    <header class="topbar">
      <div class="title">
        <h1>Competitive Intelligence</h1>
        <p id="subtitle" class="sub">Set brand + peers → Analyze</p>
      </div>
      <div class="actions">
        <button id="exportCsvBtn" class="btn">Export CSV</button>
        <button id="exportPdfBtn" class="btn accent">Export PDF</button>
      </div>
    </header>

    <!-- DASHBOARD -->
    <section id="dashboard" class="page active">
      <div class="grid">
        <div class="card">
          <div class="section-title">Configuration</div>

          <div class="form-row">
            <label>App Key (optional)</label>
            <div class="row gap">
              <input id="apiKey" class="input" placeholder="App key if you locked the API" />
              <button id="saveKeyBtn" class="btn">Save</button>
              <span id="status" class="status"></span>
            </div>
          </div>

          <div class="form-row">
            <label>Brand</label>
            <div class="row gap">
              <input id="brandName" class="input" placeholder="e.g., Crooks & Castles" />
              <input id="brandUrl" class="input" placeholder="https://brand.com" />
            </div>
          </div>

          <div class="form-row">
            <label>Competitors (one per line — optional URL after a pipe)</label>
            <textarea id="competitors" class="input area" placeholder="Stüssy | https://www.stussy.com
HUF | https://hufworldwide.com"></textarea>
          </div>

          <div class="form-row">
            <label>Context (paste weekly notes, optional)</label>
            <textarea id="reportText" class="input area" placeholder="Key observations, launches, sentiment notes…"></textarea>
          </div>

          <div class="row gap">
            <button id="analyzeBtn" class="btn accent">Analyze</button>
          </div>
        </div>

        <div class="card">
          <div class="section-title">Overview</div>
          <div class="kvs">
            <div class="kv">
              <div class="kv-label">Brand</div>
              <div id="kvBrand" class="kv-value">—</div>
            </div>
            <div class="kv">
              <div class="kv-label">Category</div>
              <div id="kvCategory" class="kv-value">—</div>
            </div>
            <div class="kv">
              <div class="kv-label">Insights</div>
              <div id="kvCount" class="kv-value">0</div>
            </div>
            <div class="kv">
              <div class="kv-label">Data Sources</div>
              <div id="kvData" class="kv-value">—</div>
            </div>
          </div>

          <div class="chart-block">
            <canvas id="chartByCompetitor" height="130"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- INSIGHTS TABLE -->
    <section id="insights" class="page">
      <div class="card">
        <div class="section-title">Insights</div>
        <div id="emptyState" class="empty">No insights yet. Click <b>Analyze</b>.</div>
        <div class="table-wrap">
          <table id="resultsTable" class="table hide">
            <thead>
              <tr>
                <th>Competitor</th>
                <th>Insight</th>
                <th>Score</th>
                <th>Note</th>
              </tr>
            </thead>
            <tbody id="resultsBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- REPORT PREVIEW (rich, export-quality) -->
    <section id="report" class="page">
      <div class="report card" id="reportCard">
        <div class="report-head">
          <div>
            <h2 id="rBrand">—</h2>
            <div id="rMeta" class="muted"></div>
          </div>
          <div class="badge">Signal & Scale</div>
        </div>

        <div class="report-grid">
          <div class="block">
            <h3>Executive Summary</h3>
            <div id="rSummary" class="muted">Run analysis to populate.</div>
          </div>

          <div class="block">
            <h3>Top Recommendations</h3>
            <ol id="rTop" class="list"></ol>
          </div>

          <div class="block span2">
            <h3>Detailed Insights</h3>
            <div id="rDetail" class="detail"></div>
          </div>
        </div>

        <footer class="report-foot">
          <div>Generated by Signal & Scale</div>
          <div id="rDate"></div>
        </footer>
      </div>
    </section>
  </main>

  <script src="./app.js"></script>
</body>
</html>
